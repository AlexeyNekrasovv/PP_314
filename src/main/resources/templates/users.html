<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
<!-- Navbar -->
<nav class="navbar">
    <div class="user-info">
        <span id="currentUserEmail"></span>
        <span class="badge" id="currentUserRole"></span>
    </div>
    <a href="/logout" class="nav-link">Logout</a>
</nav>

<div style="display: flex;">
    <!-- Sidebar -->
    <div class="sidebar" style="width: 220px;">
        <nav>
            <a href="/admin" class="nav-link active">Admin</a>
            <a href="/user" class="nav-link">User</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" style="flex: 1;">
        <h2>Admin Panel</h2>

        <!-- Tabs -->
        <div class="nav-tabs" style="display: flex;">
            <a href="#" class="nav-link active">All Users</a>
            <a href="#" class="nav-link" onclick="openModal('newUserPopup'); return false;">+ Add User</a>
        </div>

        <!-- Users Table -->
        <div class="card">
            <div class="card-header">Users</div>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Age</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th style="width: 120px;">Actions</th>
                </tr>
                </thead>
                <tbody id="users-table-body">
                <!-- Data loaded via JS -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Overlay -->
<div id="overlay" class="overlay"></div>

<!-- Add User Modal -->
<div id="newUserPopup" class="popup">
    <div class="popup-header">
        <h3>Add New User</h3>
        <a href="#" class="close-popup" data-modal="newUserPopup">&times;</a>
    </div>
    <div class="popup-body">
        <form id="new-user-form">
            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="text" class="form-control" id="firstName" name="firstName" required>
            </div>
            <div class="form-group">
                <label for="lastName">Last Name</label>
                <input type="text" class="form-control" id="lastName" name="lastName" required>
            </div>
            <div class="form-group">
                <label for="age">Age</label>
                <input type="number" class="form-control" id="age" name="age" required>
            </div>
            <div class="form-group">
                <label for="newEmail">Email</label>
                <input type="email" class="form-control" id="newEmail" name="email" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" name="password" required>
            </div>
            <div class="form-group">
                <label for="roles">Roles</label>
                <select class="form-control" multiple id="roles" name="roles"></select>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">Create User</button>
        </form>
    </div>
</div>

<!-- Edit User Modal -->
<div id="editUserModal" class="popup">
    <div class="popup-header">
        <h3>Edit User</h3>
        <a href="#" class="close-popup" data-modal="editUserModal">&times;</a>
    </div>
    <div class="popup-body">
        <form id="editUserForm">
            <input type="hidden" id="editUserId" name="id">
            <div class="form-group">
                <label for="editFirstName">First Name</label>
                <input type="text" class="form-control" id="editFirstName" name="editFirstName" required>
            </div>
            <div class="form-group">
                <label for="editLastName">Last Name</label>
                <input type="text" class="form-control" id="editLastName" name="editLastName" required>
            </div>
            <div class="form-group">
                <label for="editAge">Age</label>
                <input type="number" class="form-control" id="editAge" name="editAge" required>
            </div>
            <div class="form-group">
                <label for="editEmail">Email</label>
                <input type="email" class="form-control" id="editEmail" name="editEmail" required>
            </div>
            <div class="form-group">
                <label for="editRoles">Roles</label>
                <select multiple class="form-control" id="editRoles" name="editRoles"></select>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">Save Changes</button>
        </form>
    </div>
</div>

<script src="/js/users.js"></script>
</body>
</html>